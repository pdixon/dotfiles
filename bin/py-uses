#!/usr/bin/python3

import os
from os.path import join

def find_py_files(base):
    """ Walk the directory tree under base looking for python files."""

    py_files = []
    tree = os.walk(base)
    for root, dirs, files in tree:
        if ".hg" in dirs:
            dirs.remove(".hg")
        interesting = [join(root, name) for name in files if name.endswith(".py")]
        py_files += interesting
    return py_files

if __name__ == '__main__':
    import sys
    path = sys.argv[1] if len(sys.argv) > 1 else "./"
    print(find_py_files(path))
