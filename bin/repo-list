#! /usr/bin/env python2.6

import os

def find_repos(base):
    """ Walk the directory tree under base looking for hg and git repos.
    """
    tree = os.walk(base, topdown=True)
    #repos = [d[0] for d in tree if '.hg' in d[1]]
    for root, dirs, files in tree:
        if '.hg' in dirs:
            print "HG", root
            dirs.remove('.hg')
        elif '.git' in dirs:
            print "GIT", root
            dirs.remove('.git')

if __name__ == '__main__':
    import sys
    find_repos(sys.argv[1])
