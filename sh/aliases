# Command Enhancements

# Utility
alias reload='source ~/dotfiles/sh/aliases'
alias ea='$EDITOR ~/dotfiles/sh/aliases && reload' # Edit aliases
alias ee="$EDITOR ~/dotfiles/sh/env"

# BSD and GNU ls don't have the same args !?!
if [[ `uname` == "Darwin" ]]
then
    alias ls='ls -G'
else
    alias ls='ls --color=auto'
fi

alias c='clear'
alias cdd='cd -'  # goto last dir cd'ed from
alias cl='clear; l'
alias h='history'

alias l='ls -h'  
alias la="ls -Al"
alias l.='ls -d .[^.]*'
alias lt='ls -lt' # sort with recently modified first
alias md='mkdir -p'

function take() { 
    mkdir -p "$1"
    cd "$1" 
}

alias e='$EDITOR'

function se () {
    $EDITOR -c "/sudo:root@localhost:$1"
}


function zipr() {
  zip -r $1.zip $1
}

# Finder
alias o='open . &'

# General code

# Processes
alias tu='top -o cpu' # cpu
alias tm='top -o vsize' # memory


# Text editing
# Regenerate TAGS file from file arguments
function ct() {
  rm -f TAGS
  etags --append --output=TAGS $*
}


alias ox="open *.xcodeproj"

alias mdwn2pdf="markdown2pdf"

function asc(){
    autossh -x -a -t "$@" 'screen -RdU'
}

# just press 'asdf' keys to toggle between dvorak and us keyboard layout

aoeu() {
    echo -n 'Switching to us keyboard layout: '
    [[ -z "$DISPLAY" ]] && $SUDO loadkeys us &>/dev/null || setxkbmap us &>/dev/null
    echo 'Done'
}
asdf() {
    echo -n 'Switching to dvorak keyboard layout: '
    [[ -z "$DISPLAY" ]] && $SUDO loadkeys dvorak &>/dev/null || setxkbmap dvorak &>/dev/null
    echo 'Done'
}

function psgrep() {
    ps ax|grep -v grep|grep "$1"
}

function zapnotes {
    for pid in $(psgrep 'lotus\\notes'|awk '{print $2}')
    do
        kill $pid
    done
}

n () {
    if [ -z "$1" ]
    then
        the_file="inbox"
    else
        the_file="$1"
    fi
    $EDITOR ~/notes/"$the_file".md
}

nls () {
    tree -CR --noreport ~/notes | awk '{ if ((NR > 1) gsub(/.md/,"")); if (NF==1) print $1; else if (NF==2) print $2; else if (NF==3) printf " %s\n", $3 }' ;
}

